<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Eating step 1</title>

  <!-- Bootstrap CSS Stylesheet -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <!-- My Stylesheet -->
  <link rel="stylesheet" href="css/step.css">


  <!-- Bootstrap Javascript-->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

  <script src="/js/profile.js"></script>
  <script src="/js/step1.js"></script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158844136-2', 'auto');
  ga('send', 'pageview');
  </script>
</head>

<body style="background-image:url('images/your_food.jpg')">
  <div class="container" style="position:relative; top:20px;">
    <div>
      <a href="home" class="btn back-btn">Back</a>
    </div>
    <div class="step" align="center">
      <h2>Step 1</h2>
      <h1>Take a photo with your food</h1>
      <!-- <div id="taking-photo" style="text-align:center;">
        <video src="videostream" autoplay poster="posterimage.jpg">

        </video>
        <p>
          <button class="capture-button">Take a Photo!</button>
          <button class="stop-button">Take a Photo!</button>
        </p>

      </div> -->
      <!-- <p>take a photo of your food!</p>
      <input type="file" accept="image/*;capture =camera"/>

      <p></p>
      <input type="submit" value="Upload"> -->
      <!-- <form action="upload.htm" method="post" enctype="multipart/form-data">
	        <input type="file" accept="image/*" capture>
	        <input type="submit" value="Upload">
        </form> -->
        <div class="photo" align="center" display="inline-block">
          <video id="player" width=240 height=180 controls autoplay playsinline></video>
          <button class="btn photo-btn" id="capture" style="margin: 15px;" ><img src="images/camera.png" width="50%"/> </button>

          <canvas id="snapshot" width=240 height=180></canvas>
        </div>
    </div>
  </div>
  <a href="step2" class="btn next-btn">Next</a>



</body>

<script src="https://code.jquery.com/jquery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script>
  var player = document.getElementById('player');
  var snapshotCanvas = document.getElementById('snapshot');
  var captureButton = document.getElementById('capture');

  var handleSuccess = function(stream) {
    // Attach the video stream to the video element and autoplay.
    player.srcObject = stream;
  };

  captureButton.addEventListener('click', function() {
    var context = snapshot.getContext('2d');
    console.log(context);
    // Draw the video frame to the canvas.
    context.drawImage(player, 0, 0, snapshotCanvas.width,
        snapshotCanvas.height);
  });

  navigator.mediaDevices.getUserMedia({video: true})
      .then(handleSuccess);
</script>
</html>
